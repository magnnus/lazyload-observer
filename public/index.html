<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>图片懒加载</title>
  <style>
  .content {
    padding-top: 1000px;
  }
    li {
      height: 320px;
    }
  </style>
</head>

<body>
  <div class="content">
    <ul class="athm-slide__track">
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn1"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/1@1x.jpg"
            data-srcset2="./pics/1.jpg 2x, ./pics/1@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn2"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/2@1x.jpg"
            data-srcset2="./pics/2.jpg 2x, ./pics/2@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn3"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/3@1x.jpg"
            data-srcset2="./pics/3.jpg 2x, ./pics/3@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn4"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/4@1x.jpg"
            data-srcset2="./pics/4.jpg 2x, ./pics/4@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn5"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/5@1x.jpg"
            data-srcset2="./pics/5.jpg 2x, ./pics/5@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn6"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/6@1x.jpg"
            data-srcset2="./pics/6.jpg 2x, ./pics/6@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn7"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/7@1x.jpg"
            data-srcset2="./pics/7.jpg 2x, ./pics/7@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn9"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/9@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
      <li class="athm-slide__item">
        <a href="####">
          <img
            class="fn8"
            width="640"
            height="320"
            data-lazyload
            data-src2="./pics/8@1x.jpg"
            data-srcset2="./pics/8.jpg 2x, ./pics/8@1x.jpg"
            alt=""
            style=""
          >
        </a>
      </li>
    </ul>
  </div>

  <div class="lazymodule">lazy mdule demo 1!!</div>
  <div class="lazymodule">lazy mdule demo 2!!</div>
  <div class="lazymodule">lazy mdule demo 3!!</div>
  <div class="lazymodule">lazy mdule demo 4!!</div>
  <div class="lazymodule" style="visibility: hidden">lazy mdule demo 5!!</div>
  <div class="lazymodule" style="display: none">lazy mdule demo 6!!</div>
  <div class="lazymodule"></div>


  <section class="lazydirectly">lazy directly 1!</section>
  <section class="lazydirectly">lazy directly 2!</section>
  <section class="lazydirectly">lazy directly 3!</section>
  <section class="lazydirectly">lazy directly 4!</section>

  <script src="<%= htmlWebpackPlugin.files.chunks.LazyLoad.entry %>"></script>
  <script>
  window.onload = function () {

    window.imgDemo = new AutoTs.LazyLoad('img', {
      attr: 'data-src2',
      srcsetAttr: 'data-srcset2',
      root: null,
      rootMargin: '0px',
      wait: 300,
      threshold: 0,
      onLoad: function() {
        var temp = this.src.split('/');
        console.log(temp[temp.length - 1], 'img loaded successly');
      },
      onError: function() {
        var temp = this.getAttribute('data-src2').split('/');
        console.log(temp[temp.length - 1], 'img loaded error');
        console.log(typeof this)
        // imgDemo.unbind(this)
      },
      onAppear: function() {
        var temp = this.getAttribute('data-src2').split('/');
        console.log(temp[temp.length - 1], 'img appeared');
      }
    });
    console.log('imgDemo', imgDemo);

    var moduleDemo = new AutoTs.LazyLoad('.lazymodule', {
      onAppear: function () {
        this.innerHTML += ('appeared!!!')
        console.log(this.innerHTML);
      }
    });
    console.log('moduleDemo',  moduleDemo);


    var lazyDirectlyDemo = new AutoTs.LazyLoad('.lazydirectly', {
      onAppear: function () {
        this.innerHTML += (new Date().toLocaleString());
        console.log(this.innerHTML);
      },
      delay: 2000
    });
    console.log('lazyDirectlyDemo',  lazyDirectlyDemo);
  }
  </script>
</body>

</html>